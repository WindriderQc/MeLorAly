<!-- Authenticated Navigation - Top Header -->
<header class="sticky top-0 z-10 bg-background-light/80 backdrop-blur-sm border-b border-gray-200">
    <div class="flex items-center justify-between p-4">
        <button onclick="toggleMenu()" class="text-gray-700 hover:text-primary">
            <span class="material-symbols-outlined text-2xl">menu</span>
        </button>
        
        <h1 class="text-lg font-bold text-gray-900">
            <% if (currentPath.includes('/dashboard')) { %>
                Tableau de bord
            <% } else if (currentPath.includes('/family')) { %>
                Famille
            <% } else if (currentPath.includes('/messages')) { %>
                Messages
            <% } else if (currentPath.includes('/education')) { %>
                Éducation
            <% } else { %>
                MeLorAly
            <% } %>
        </h1>
        
        <button onclick="toggleNotifications()" class="relative text-gray-700 hover:text-primary">
            <span class="material-symbols-outlined text-2xl">notifications</span>
            <span class="absolute top-0 right-0 w-2 h-2 bg-primary rounded-full"></span>
        </button>
    </div>
</header>

<!-- Bottom Navigation -->
<nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 pb-safe z-20">
    <div class="flex items-center justify-around py-2">
        <a href="/dashboard" class="flex flex-col items-center gap-1 px-4 py-2 <%= currentPath === '/dashboard' ? 'text-primary' : 'text-gray-600' %> hover:text-primary transition">
            <span class="material-symbols-outlined <%= currentPath === '/dashboard' ? 'filled' : '' %>">home</span>
            <span class="text-xs font-medium">Accueil</span>
        </a>
        
        <a href="/family" class="flex flex-col items-center gap-1 px-4 py-2 <%= currentPath.includes('/family') ? 'text-primary' : 'text-gray-600' %> hover:text-primary transition">
            <span class="material-symbols-outlined <%= currentPath.includes('/family') ? 'filled' : '' %>">group</span>
            <span class="text-xs font-medium">Famille</span>
        </a>
        
        <a href="/messages" class="flex flex-col items-center gap-1 px-4 py-2 <%= currentPath.includes('/messages') ? 'text-primary' : 'text-gray-600' %> hover:text-primary transition">
            <span class="material-symbols-outlined <%= currentPath.includes('/messages') ? 'filled' : '' %>">chat</span>
            <span class="text-xs font-medium">Messages</span>
        </a>
        
        <a href="/education" class="flex flex-col items-center gap-1 px-4 py-2 <%= currentPath.includes('/education') ? 'text-primary' : 'text-gray-600' %> hover:text-primary transition">
            <span class="material-symbols-outlined <%= currentPath.includes('/education') ? 'filled' : '' %>">school</span>
            <span class="text-xs font-medium">Éducation</span>
        </a>
        
        <a href="/profile" class="flex flex-col items-center gap-1 px-4 py-2 <%= currentPath.includes('/profile') ? 'text-primary' : 'text-gray-600' %> hover:text-primary transition">
            <span class="material-symbols-outlined <%= currentPath.includes('/profile') ? 'filled' : '' %>">person</span>
            <span class="text-xs font-medium">Profil</span>
        </a>
    </div>
</nav>

<!-- Side Menu (Hidden by default) -->
<div id="sideMenu" class="fixed inset-0 z-30 hidden">
    <div class="absolute inset-0 bg-black bg-opacity-50" onclick="toggleMenu()"></div>
    <div class="absolute left-0 top-0 bottom-0 w-80 bg-white shadow-xl transform transition-transform">
        <div class="p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-900">Menu</h2>
                <button onclick="toggleMenu()" class="text-gray-600 hover:text-gray-900">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <div class="flex items-center gap-3 p-4 bg-background-light rounded-xl mb-6">
                <div class="w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold">
                    <%= profile && profile.full_name ? profile.full_name.charAt(0).toUpperCase() : 'U' %>
                </div>
                <div>
                    <p class="font-semibold text-gray-900"><%= profile ? profile.full_name : user.email %></p>
                    <p class="text-sm text-gray-600"><%= user.email %></p>
                </div>
            </div>
            
            <nav class="space-y-2">
                <a href="/dashboard" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-background-light transition">
                    <span class="material-symbols-outlined">home</span>
                    <span class="font-medium">Tableau de bord</span>
                </a>
                <a href="/settings" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-background-light transition">
                    <span class="material-symbols-outlined">settings</span>
                    <span class="font-medium">Paramètres</span>
                </a>
                <a href="/help" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-background-light transition">
                    <span class="material-symbols-outlined">help</span>
                    <span class="font-medium">Aide</span>
                </a>
                <a href="/auth/logout" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-red-50 text-red-600 transition">
                    <span class="material-symbols-outlined">logout</span>
                    <span class="font-medium">Déconnexion</span>
                </a>
            </nav>
        </div>
    </div>
</div>

<script>
function toggleMenu() {
    const menu = document.getElementById('sideMenu');
    menu.classList.toggle('hidden');
}

function toggleNotifications() {
    // TODO: Implement notifications panel
    alert('Notifications à venir!');
}
</script>

<!-- Add bottom padding to main content to account for bottom nav -->
<style>
    main {
        padding-bottom: 80px;
    }
</style>